!function(t){"use strict";var i={$body:[],$group:[],nav:null,placeholder:null,$navItems:[],$sections:[],init:function(){this.$group=t(".js-in-page-nav-group"),this.$group.length>0&&(this.$body=t("body"),this.setup())},setup:function(){this.$sections=this.$group.find(".js-in-page-nav-section");var i=t('<nav class="in-page-nav animated"/>'),s=t('<ul class="list-unstyled"/>');this.$sections.each((function(){var i=t(this),a=i.find("h2:first"),n='<img src="/images/sdlc-icons/'+this.id+'.svg"/>',e=a.attr("data-js-in-page-nav-title")||a.text(),c='data-ga-name="'+this.id+'" ';if(t("#test").hasClass("features-page"))var o=t('<li class="js-in-page-nav-item"><a id="navicon" data-ga-location="header" href="#'+this.id+'" '+c+">"+n+e+"</a></li>");else o=t('<li class="js-in-page-nav-item"><a data-ga-location="header" href="#'+this.id+'" '+c+">"+e+"</a></li>");o.data("section",i.get(0)),s.append(o)})),s.children().first().addClass("is-active"),this.$navItems=s.children(),i.append(s),this.$group.prepend(i);var a=t('<div class="in-page-nav-placeholder"/>').height(i.innerHeight());this.placeholder=a.get(0),this.nav=i.get(0),this.$group.prepend(a),this.is_sticky=!1,this.scrollOnLoad(),this.scrollCallback(),window.an_OnScroll.addFunction(this.scrollCallback.bind(this)),t(document).on("click",".js-in-page-nav-item",this.clickCallback)},scrollOnLoad:function(){var t=window.location.hash;"#"===t.substr(0,1)&&(t=t.substr(1));var i=document.getElementById(t);i&&this.scrollTo(i)},scrollCallback:function(){this.checkForStick(),this.checkForActiveSection()},clickCallback:function(s){s.preventDefault(),i.scrollTo(t(this).data("section"))},scrollTo:function(i){var s=i.getBoundingClientRect().top+window.scrollY,a=this.$group.attr("offset")||125,n=this.$group.attr("showhash")||null;if(t("html, body").animate({scrollTop:s-a},400),n&&"true"==n){var e=event.target.href||null;e&&(window.location.hash=e.substr(e.indexOf("#")+1))}},checkForStick:function(){(this.is_sticky?this.placeholder.getBoundingClientRect():this.nav.getBoundingClientRect()).top<=50?this.is_sticky||(this.$body.addClass("body--has-in-page-nav-stuck"),this.is_sticky=!0):this.is_sticky&&(this.$body.removeClass("body--has-in-page-nav-stuck"),this.is_sticky=!1)},checkForActiveSection:function(){var i=this,s=this.nav.getBoundingClientRect();this.$navItems.each((function(){var a=t(this),n=a.data("section").getBoundingClientRect();i.rectsOverlap(s,n)&&a.addClass("is-active").siblings().removeClass("is-active")}))},rectsOverlap:function(t,i){return t.top>i.top-80&&t.bottom<i.bottom}};t(i.init.bind(i))}(jQuery);