<!DOCTYPE html>
<html lang=en>
<head>
<meta charset=UTF-8 />
<meta content='width=device-width, initial-scale=1.0' name=viewport />
<meta content='default-src &#39;self&#39; https: http:; script-src &#39;self&#39; &#39;unsafe-inline&#39; &#39;unsafe-eval&#39; https: http:; style-src &#39;self&#39; &#39;unsafe-inline&#39; https: http:; object-src https: http:; base-uri &#39;self&#39;; connect-src &#39;self&#39; https: http: wss: ws:; frame-src &#39;self&#39; https: http:; img-src &#39;self&#39; https: http: data:; manifest-src &#39;self&#39;; media-src &#39;self&#39; https: http:; worker-src &#39;self&#39; https: http:;' http-equiv=Content-Security-Policy />
<meta content='index, follow' name=robots />
<title>
GitLab 8.17.4, 8.16.8, and 8.15.8 released
|
GitLab
</title>
<meta content='Learn more about GitLab Release 8.17.4, 8.16.8, and 8.15.8 for GitLab Community Edition (CE) and Enterprise Edition (EE)' name=description />
<meta content='Learn more about GitLab Release 8.17.4, 8.16.8, and 8.15.8 for GitLab Community Edition (CE) and Enterprise Edition (EE)' name='twitter:description'/>
<meta content='Learn more about GitLab Release 8.17.4, 8.16.8, and 8.15.8 for GitLab Community Edition (CE) and Enterprise Edition (EE)' property='og:description'/>
<meta content=GitLab property='og:site_name'/>
<meta content='GitLab 8.17.4, 8.16.8, and 8.15.8 released' property='og:title'/>
<meta content='https://gitlab.com/gitlab-com/www-gitlab-com/' property='og:repo'/>
<meta content='https://gitlab.com/' property='og:instance'/>
<meta content='gitlab-com/www-gitlab-com/' property='og:path'/>
<meta content='releases/posts/2017-03-20-gitlab-8-dot-17-dot-4-security-release.html.md' property='og:relative_path'/>
<meta content='sites/uncategorized/' property='og:monorepo_site_path_fragment'/>
<meta content=article property='og:type'/>
<meta content='https://about.gitlab.com/releases/2017/03/20/gitlab-8-dot-17-dot-4-security-release/' property='og:url'/>
<meta content='2017-03-20 23:59' property='article:published_time'/>
<meta content='https://about.gitlab.com/about' property='article:author'/>
<meta content="https://about.gitlab.com/images/default-blog-image.png" property="og:image">
<meta content="https://about.gitlab.com/images/default-blog-image.png" name="twitter:image">
<meta content=summary_large_image name='twitter:card'/>
<meta content='@GitLab' name='twitter:site'/>
<meta content='GitLab 8.17.4, 8.16.8, and 8.15.8 released' name='twitter:title'/>
<meta content='@GitLab' name='twitter:creator'/>
<link href='/atom.xml' rel=alternate title=Blog type='application/atom+xml'/>
<link href='/all-releases.xml' rel=alternate title='All Releases' type='application/atom+xml'/>
<link href='/security-releases.xml' rel=alternate title='Security Releases' type='application/atom+xml'/>
<link href='/releases.xml' rel=alternate title='Major Releases' type='application/atom+xml'/>
<link href='/ico/favicon.ico?cache=2022041' rel='shortcut icon'/>
<link href='/ico/favicon-192x192.png?cache=2022041' rel=icon sizes=192x192 type='image/png'/>
<link href='/ico/favicon-160x160.png?cache=2022041' rel=icon sizes=160x160 type='image/png'/>
<link href='/ico/favicon-96x96.png?cache=2022041' rel=icon sizes=96x96 type='image/png'/>
<link href='/ico/favicon-16x16.png?cache=2022041' rel=icon sizes=16x16 type='image/png'/>
<link href='/ico/favicon-32x32.png?cache=2022041' rel=icon sizes=32x32 type='image/png'/>
<link href='/ico/apple-touch-icon-57x57.png?cache=2022041' rel=apple-touch-icon sizes=57x57 />
<link href='/ico/apple-touch-icon-114x114.png?cache=2022041' rel=apple-touch-icon sizes=114x114 />
<link href='/ico/apple-touch-icon-72x72.png?cache=2022041' rel=apple-touch-icon sizes=72x72 />
<link href='/ico/apple-touch-icon-144x144.png?cache=2022041' rel=apple-touch-icon sizes=144x144 />
<link href='/ico/apple-touch-icon-60x60.png?cache=2022041' rel=apple-touch-icon sizes=60x60 />
<link href='/ico/apple-touch-icon-120x120.png?cache=2022041' rel=apple-touch-icon sizes=120x120 />
<link href='/ico/apple-touch-icon-76x76.png?cache=2022041' rel=apple-touch-icon sizes=76x76 />
<link href='/ico/apple-touch-icon-152x152.png?cache=2022041' rel=apple-touch-icon sizes=152x152 />
<link href='/ico/apple-touch-icon-180x180.png?cache=2022041' rel=apple-touch-icon sizes=180x180 />
<meta content='#554488' name=msapplication-TileColor />
<meta content='/ico/mstile-144x144.png?cache=2022041' name=msapplication-TileImage />
<meta content='/ico/browserconfig.xml' name=msapplication-config />
<script src='https://cdn.cookielaw.org/consent/7f944245-c5cd-4eed-a90e-dd955adfdd08/OtAutoBlock.js'></script>
<script charset=UTF-8 data-domain-script=7f944245-c5cd-4eed-a90e-dd955adfdd08 src='https://cdn.cookielaw.org/scripttemplates/otSDKStub.js'></script>
<script>
  //<![CDATA[
    function OptanonWrapper() { }
  //]]>
</script>
<script>
  //<![CDATA[
    window.dataLayer = window.dataLayer || []
    function gtag(){dataLayer.push(arguments);}
    gtag('consent', 'default', {
      'analytics_storage': 'denied',
      'ad_storage': 'denied',
      'functionality_storage': 'denied',
      'region': [ 'AT', 'BE', 'BG', 'HR', 'CY', 'CZ', 'DK', 'EE', 'FI', 'FR', 'DE', 'GR', 'HU', 'IE', 'IT', 'LV', 'LT', 'LU', 'MT', 'NL', 'PL', 'PT', 'RO', 'SK', 'SI', 'ES', 'SE', 'IS', 'LI', 'NO', 'GB', 'PE', 'RU'],
      'wait_for_update': 500
    });
    gtag('consent', 'default', {
      'analytics_storage': 'granted',
      'ad_storage': 'granted',
      'functionality_storage': 'granted',
      'wait_for_update': 500
    });
    
    window.geofeed = (options) => {
      dataLayer.push({
        'event' : 'OneTrustCountryLoad',
        'oneTrustCountryId': options.country.toString()
      })
    }
    
    const json = document.createElement('script');
    json.setAttribute('src', 'https://geolocation.onetrust.com/cookieconsentpub/v1/geo/location/geofeed');
    document.head.appendChild(json);
  //]]>
</script>
<script>document.documentElement.className = 'html--js'</script>
<script async='' src='//cdn.bizible.com/scripts/bizible.js'></script>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-37019925-1', 'auto', {allowLinker: true});
ga('require', 'GTM-WC3ZR2P');
</script>
<script>
(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NJXWQL');
</script>
<script>
(function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
(w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
})(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
_st('install','5geYbhTxNzL5dsekC-B-','2.0.0');
</script>
<link href='https://about.gitlab.com/releases/2017/03/20/gitlab-8-dot-17-dot-4-security-release/' rel=canonical />
<link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,500,600,700' rel=stylesheet />
<link crossorigin=anonymous href='https://use.fontawesome.com/releases/v5.1.0/css/all.css' integrity='sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt' rel=stylesheet />
<link href='https://cdnjs.cloudflare.com/ajax/libs/tiny-slider/2.8.7/tiny-slider.css' rel=stylesheet />
<link href="/stylesheets/styles.css" rel=stylesheet /><link href="/stylesheets/highlight.css" rel=stylesheet />

<link href="/stylesheets/slippers.css?cacheBust=4cf1fb774d1" rel=stylesheet />
<link href="/stylesheets/be-navigation.css?cacheBust=4cf1fb774d1" rel=stylesheet />
<script>
dataLayer.push({'category': 'releases'});
</script>
</head>
<body data-spy=scroll data-target='.qnav'>
<noscript>
<iframe height=0 src='//www.googletagmanager.com/ns.html?id=GTM-NJXWQL' style='display:none;visibility:hidden' width=0></iframe>
</noscript>
<template id=be-nav>
<div id=be-nav-target>
<slp-navigation></slp-navigation>
</div>
</template>
<nav class='slp-sticky slp-left-0 slp-right-0 slp-top-0 slp-bg-white slp-z-90' id=global-nav style='z-index: 1000000;'>
<be-navigation></be-navigation>
</nav>
<div class='search-box js-search-box'>
<i class='fa fa-search search-box-icon'></i>
<input class='search-input js-search st-header' placeholder='Search...'/>
<button aria-label='Close search' class='search-close js-search-toggle' type=button>
<i class='fa fa-times'></i>
</button>
</div>
<script src='/javascripts/be-navigation.js?cacheBust=4cf1fb774d1'></script>
<div class='blog article'>
<div class='wrapper body'>
<div class=category-back-link>
<a href="/releases/categories/releases/"><span>&#8592;</span>
<span>Back to</span>
<span>releases</span>
</a></div>
<span class=date>
Mar 20, 2017
</span>
<span>-</span>
<span class=author>
<a href="/company/team/#gitlab">GitLab</a>
<a href="https://twitter.com/gitlab"><span>&nbsp;</span>
<span class=author-twitter>
<i class='fab fa-twitter'></i>
</span>
</a></span>
<h1>
GitLab 8.17.4, 8.16.8, and 8.15.8 released
</h1>
<p class=description>
Learn more about GitLab Release 8.17.4, 8.16.8, and 8.15.8 for GitLab Community Edition (CE) and Enterprise Edition (EE)
</p>
<p></p>
<div class=content>
<p>Today we are releasing versions 8.17.4, 8.16.8, and 8.15.8 for GitLab Community
Edition (CE) and Enterprise Edition (EE).</p>
<p>These versions contain several security fixes, including an important security
fix for a critical information disclosure vulnerability, protection against Server-Side
Request Forgery (SSRF) attacks, a fix for some links vulnerable to tabnabbing, a fix for
a flaw that could leak private email addresses in Atom feeds, and a fix for private
repository data leakage into ElasticSearch (EE-specific). We <strong>strongly recommend</strong>
that all affected GitLab installations be upgraded to one of these versions
<strong>immediately</strong>.</p>
<p>Please read on for more details.</p>
<h2 id=information-disclosure-in-issue-and-merge-request-trackers>Information Disclosure in Issue and Merge Request Trackers</h2>
<p>During an internal code review a critical vulnerability in the GitLab Issue and
Merge Request trackers was discovered. This vulnerability could allow a user
with access to assign ownership of an issue or merge request to another user
to disclose that user's private token, email token, email address, and
encrypted OTP secret. Reporter-level access to a GitLab project is required to
exploit this flaw.</p>
<p>This vulnerability is the result of a bug in the serialization of a user object
and was introduced in GitLab 8.7.0. Please see <a href="https://gitlab.com/gitlab-org/gitlab-ce/issues/29661">the issue</a> for more
details.</p>
<p>This issue has been assigned <a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2017-0882">CVE-2017-0882</a>.</p>
<h3 id=versions-affected>Versions affected</h3>
<ul>
<li>8.7.0 through 8.15.7</li>
<li>8.16.0 through 8.16.7</li>
<li>8.17.0 through 8.17.3</li>
</ul>
<p>We <strong>strongly recommend</strong> that all installations running a version mentioned
above be upgraded as soon as possible.</p>
<h3 id=post-upgrade-steps>Post-Upgrade Steps</h3>
<p>Due to the nature of this vulnerability it is possible that sensitive user tokens
have been cached by proxies or web browsers. We therefore recommend that
administrators reset private tokens and incoming email tokens for all users. A
rake task for performing token resets is included with this announcement.</p>
<p>Encrypted One-Time Password (OTP) secrets may also have been leaked by the
vulnerability. These secrets are encrypted, require the key for decrypting the
secret, and cannot be used on their own without a copy of the user password,
however we are still recommending that all users who utilize One-Time Passwords
<a href="https://docs.gitlab.com/ee/user/profile/account/two_factor_authentication.html">disable and then re-enable their 2FA</a> for all GitLab instances. This will
reset the OTP secret.</p>
<h3 id=rake-task-for-resetting-user-tokens>Rake Task for Resetting User Tokens</h3>
<p>After upgrading we recommended that all GitLab installations reset all user
private tokens and email tokens. To do so please save the following rake task
in the appropriate location.</p>
<p>For Omnibus: <code>/opt/gitlab/embedded/service/gitlab-rails/lib/tasks/reset_token.rake</code></p>
<p>For Source: <code>&lt;gitlab_installation_dir&gt;/lib/tasks/reset_token.rake</code></p>
<div class=highlight><pre class="highlight ruby"><code><span class="c1"># lib/tasks/reset_token.rake</span>
<span class="nb">require_relative</span> <span class="s1">'../../app/models/concerns/token_authenticatable.rb'</span>

<span class="no">STDOUT</span><span class="p">.</span><span class="nf">sync</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">namespace</span> <span class="ss">:tokens</span> <span class="k">do</span>
  <span class="n">desc</span> <span class="s2">"Reset all GitLab user auth tokens"</span>
  <span class="n">task</span> <span class="ss">reset_all: :environment</span> <span class="k">do</span>
    <span class="n">reset_all_users_token</span><span class="p">(</span><span class="ss">:reset_authentication_token!</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="n">desc</span> <span class="s2">"Reset all GitLab email tokens"</span>
  <span class="n">task</span> <span class="ss">reset_all_email: :environment</span> <span class="k">do</span>
    <span class="n">reset_all_users_token</span><span class="p">(</span><span class="ss">:reset_incoming_email_token!</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">reset_all_users_token</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
    <span class="no">TmpUser</span><span class="p">.</span><span class="nf">find_in_batches</span> <span class="k">do</span> <span class="o">|</span><span class="n">batch</span><span class="o">|</span>
      <span class="nb">puts</span> <span class="s2">"Processing batch starting with user ID: </span><span class="si">#{</span><span class="n">batch</span><span class="p">.</span><span class="nf">first</span><span class="p">.</span><span class="nf">id</span><span class="si">}</span><span class="s2">"</span>

      <span class="n">batch</span><span class="p">.</span><span class="nf">each</span><span class="p">(</span><span class="o">&amp;</span><span class="n">token</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">TmpUser</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
  <span class="kp">include</span> <span class="no">TokenAuthenticatable</span>

  <span class="nb">self</span><span class="p">.</span><span class="nf">table_name</span> <span class="o">=</span> <span class="s1">'users'</span>

  <span class="k">def</span> <span class="nf">reset_authentication_token!</span>
    <span class="n">write_new_token</span><span class="p">(</span><span class="ss">:authentication_token</span><span class="p">)</span>
    <span class="n">save!</span><span class="p">(</span><span class="ss">validate: </span><span class="kp">false</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">reset_incoming_email_token!</span>
    <span class="n">write_new_token</span><span class="p">(</span><span class="ss">:incoming_email_token</span><span class="p">)</span>
    <span class="n">save!</span><span class="p">(</span><span class="ss">validate: </span><span class="kp">false</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<p>Omnibus users would then run:</p>
<div class=highlight><pre class="highlight plaintext"><code>sudo gitlab-rake tokens:reset_all
sudo gitlab-rake tokens:reset_all_email
</code></pre></div>
<p>Source users would run:</p>
<div class=highlight><pre class="highlight plaintext"><code>sudo -u git -H bundle exec rake tokens:reset_all RAILS_ENV=production
sudo -u git -H bundle exec rake tokens:reset_all_email RAILS_ENV=production
</code></pre></div>
<p>The rake file can be deleted after this task finishes.</p>
<h3 id=workarounds>Workarounds</h3>
<p>If you're unable to upgrade right away, you can secure your GitLab installation
against this vulnerability using the workaround outlined below until you
have time to upgrade.</p>
<h3 id=securing-via-patch>Securing via patch</h3>
<p>To temporarily patch just the critical vulnerability, change to the appropriate
directory and apply the attached diff.</p>
<p>Omnibus:</p>
<div class=highlight><pre class="highlight plaintext"><code>$ cd /opt/gitlab/embedded/service/gitlab-rails/
$ git apply &lt;path_to_diff&gt;
$ sudo gitlab-ctl restart unicorn
</code></pre></div>
<p>Source:</p>
<div class=highlight><pre class="highlight plaintext"><code>$ cd &lt;gitlab_installation_dir/
$ git apply &lt;path_to_diff&gt;
</code></pre></div>
<p>Patch:</p>
<div class=highlight><pre class="highlight diff"><code><span class="gh">diff --git a/app/controllers/projects/issues_controller.rb b/app/controllers/projects/issues_controller.rb
index 1151555..857d907 100644
</span><span class="gd">--- a/app/controllers/projects/issues_controller.rb
</span><span class="gi">+++ b/app/controllers/projects/issues_controller.rb
</span><span class="gu">@@ -129,7 +129,7 @@ class Projects::IssuesController &lt; Projects::ApplicationController
</span>       end

       format.json do
<span class="gd">-        render json: @issue.to_json(include: { milestone: {}, assignee: { methods: :avatar_url }, labels: { methods: :text_color } }, methods: [:task_status, :task_status_short])
</span><span class="gi">+        render json: @issue.to_json(include: { milestone: {}, assignee: { only: [:name, :username], methods: [:avatar_url] }, labels: { methods: :text_color } }, methods: [:task_status, :task_status_short])
</span>       end
     end

<span class="gh">diff --git a/app/controllers/projects/merge_requests_controller.rb b/app/controllers/projects/merge_requests_controller.rb
index 82f9b6e..677a8a1 100644
</span><span class="gd">--- a/app/controllers/projects/merge_requests_controller.rb
</span><span class="gi">+++ b/app/controllers/projects/merge_requests_controller.rb
</span><span class="gu">@@ -308,7 +308,7 @@ class Projects::MergeRequestsController &lt; Projects::ApplicationController
</span>       end

       format.json do
<span class="gd">-        render json: @merge_request.to_json(include: { milestone: {}, assignee: { methods: :avatar_url }, labels: { methods: :text_color } }, methods: [:task_status, :task_status_short])
</span><span class="gi">+        render json: @merge_request.to_json(include: { milestone: {}, assignee: { only: [:name, :username], methods: [:avatar_url] }, labels: { methods: :text_color } }, methods: [:task_status, :task_status_short])
</span>       end
     end
   rescue ActiveRecord::StaleObjectError
</code></pre></div>
<h3 id=verifying-the-workaround>Verifying the workaround</h3>
<ol>
<li>Browse to a project</li>
<li>Open the project's issue tracker</li>
<li>Create an issue and assign ownership of the issue to another user</li>
<li>View the returned JSON and verify that no private information such as tokens are included</li>
</ol>
<h2 id=other-fixes-in-8174-8168-and-8158>Other fixes in 8.17.4, 8.16.8, and 8.15.8</h2>
<h3 id=ssrf-when-importing-a-project-from-a-repo-by-url>SSRF when importing a project from a Repo by URL</h3>
<p>GitLab instances that have enabled project imports using "Repo by URL" were
vulnerable to Server-Side Request Forgery attacks. By specifying a project import
URL of <code>localhost</code> an attacker could target services that are bound to the local
interface of the server. These services often do not require authentication.
Depending on the service an attacker might be able craft an attack using the
project import request URL.</p>
<p>This update blocks all import attempts from <code>localhost</code> and all bound server
interfaces other than those assigned as GitLab web or SSH services (Typically
ports 22 and 443). This update also blocks all import attempts from TCP ports
below 1024 with the exception of ports 22, 80 and 443. <a href="https://gitlab.com/gitlab-org/gitlab-ce/issues/17286">17286</a></p>
<p>Thanks to <a href="https://hackerone.com/strukt">Strukt</a> via <a href="https://hackerone.com/">HackerOne</a> for reporting this vulnerability.</p>
<h3 id=links-in-environments-tab-vulnerable-to-tabnabbing>Links in Environments tab vulnerable to tabnabbing</h3>
<p><a href="https://twitter.com/EdOverflow">edio</a> via <a href="https://hackerone.com/">HackerOne</a> reported that user-configured Environment links include
<code>target=_blank</code> but do not also include <code>rel: noopener noreferrer</code>. Anyone
clicking on these links may therefore be subjected to tabnabbing attacks where
a link back to the requesting page is maintained and can be manipulated by the
target server.</p>
<p>This update also includes patches for several other locations that might be
vulnerable. <a href="https://gitlab.com/gitlab-org/gitlab-ce/issues/29081">29081</a></p>
<h3 id=accounts-with-email-set-to-do-not-show-on-profile-have-addresses-exposed-in-public-atom-feed>Accounts with email set to "Do not show on profile" have addresses exposed in public atom feed</h3>
<p>Several GitLab users reported that even with "Do not show on profile" configured
for their email addresses those addresses were still being leaked in Atom feeds
if they commented on a public project. <a href="https://gitlab.com/gitlab-org/gitlab-ce/issues/28058">28058</a></p>
<h3 id=elasticsearch-returns-internal-code-snippets-issues-wiki-pages-and-mrs-on-public-projects-ee-only>Elasticsearch returns internal code, snippets, issues, wiki pages and MRs on public projects (EE only)</h3>
<p>GitLab-EE Users have reported that when Elasticsearch was enabled for searching GitLab
instances data from internal or private projects may be leaked in searches. <a href="https://gitlab.com/gitlab-org/gitlab-ee/issues/1067">1067</a></p>
<p>All GitLab-EE instances with Elasticsearch enabled should run a rake task
post-installation to configure privilege levels for Elasticsearch data.</p>
<p>Note: <em>There <a href="https://gitlab.com/gitlab-org/gitlab-ee/issues/1958">is a bug</a> in
the rake task deployed with this security release.</em> Users wishing to run this
task should wait for GitLab 9.1 or apply the patch included with <a href="https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/1473/diffs">this merge
request</a>.</p>
<p>Omnibus users:</p>
<div class=highlight><pre class="highlight plaintext"><code>sudo gitlab-rake gitlab:elastic:add_feature_visibility_levels_to_project
</code></pre></div>
<p>Source users:</p>
<div class=highlight><pre class="highlight plaintext"><code>sudo -u git -H bundle exec rake gitlab:elastic:add_feature_visibility_levels_to_project RAILS_ENV=production
</code></pre></div>
<h2 id=upgrade-barometer>Upgrade barometer</h2>
<p>These versions do not include any migrations and will not require downtime.</p>
<p>Please be aware that by default the Omnibus packages will stop, run migrations,
and start again, no matter how “big” or “small” the upgrade is. This behavior
can be changed by adding a <a href="http://doc.gitlab.com/omnibus/update/README.html"><code>/etc/gitlab/skip-auto-migrations</code>
file</a>.</p>
<h2 id=updating>Updating</h2>
<p>To update, check out our <a href="/update/">update page</a>.</p>
<h2 id=enterprise-edition>Enterprise Edition</h2>
<p>Interested in GitLab Enterprise Edition? Check out the <a href="/features/#enterprise">features exclusive to
EE</a>.</p>
<p>Access to GitLab Enterprise Edition is included with a
<a href="/pricing/">subscription</a>. No time to upgrade GitLab
yourself? Subscribers receive upgrade and installation services.</p>
<div class='panel panel-default twitter-block'>
<a class='twitter-block-link panel-body' href='http://twitter.com/share?text=GitLab+8.17.4%2C+8.16.8%2C+and+8.15.8+released+via+%40gitlab&amp;url=https://about.gitlab.com/releases/2017/03/20/gitlab-8-dot-17-dot-4-security-release/&amp;hashtags=' rel=nofollow target=_blank title='Tweet!'>
<span class='twitter-text pull-left'>
GitLab 8.17.4, 8.16.8, and 8.15.8 released
via @gitlab
</span>
<span class=click-to-tweet>
Click to tweet!
<i class='fab fa-twitter'></i>
</span>
</a>
</div>
</div>
<div class=social>
<div class='share-butons clearfix'>
<a class='share-btn share-btn-facebook' href='http://www.facebook.com/sharer.php?u=https://about.gitlab.com/releases/2017/03/20/gitlab-8-dot-17-dot-4-security-release/' onclick='openSocialLink(this, 500, 400); return false;' target=_blank>
<i class='fab fa-facebook'></i>
<span class=sr-only>
Share on Facebook
</span>
</a>
<a class='share-btn share-btn-twitter' href='http://twitter.com/share?url=https://about.gitlab.com/releases/2017/03/20/gitlab-8-dot-17-dot-4-security-release/&amp;text=GitLab 8.17.4, 8.16.8, and 8.15.8 released' onclick='openSocialLink(this, 500, 400); return false;' target=_blank>
<i class='fab fa-twitter'></i>
<span class=sr-only>
Share on Twitter
</span>
</a>
<a class='share-btn share-btn-linkedin' href='https://www.linkedin.com/shareArticle?mini=true&amp;url=https://about.gitlab.com/releases/2017/03/20/gitlab-8-dot-17-dot-4-security-release/&amp;title=GitLab 8.17.4, 8.16.8, and 8.15.8 released&amp;summary=&amp;source=' onclick='openSocialLink(this, 500, 400); return false;' target=_blank>
<i class='fab fa-linkedin'></i>
<span class=sr-only>
Share on LinkedIn
</span>
</a>
<a class='share-btn share-btn-hackernews' href='https://news.ycombinator.com/submitlink?u=https://about.gitlab.com/releases/2017/03/20/gitlab-8-dot-17-dot-4-security-release/&amp;t=GitLab 8.17.4, 8.16.8, and 8.15.8 released' onclick='openSocialLink(this, 500, 400); return false;' target=_blank>
<i class='fab fa-hacker-news'></i>
<span class=sr-only>
Share on Hacker News
</span>
</a>
</div>
</div>
<nav aria-label='Blog post pager'>
<ul class=pager>
<li class=pull-left>
<a href="/releases/2017/03/17/gitlab-critical-release-preannouncement/" title="Announcing March 20, 2017 Critical Security Update"><i class='fa fa-chevron-left'></i>
<span class=screen-reader-text>Previous Post:</span>
<span class=adjacent_post_title>
Announcing March 20, 2017 Critical Security Update
</span>
</a></li>
<li class=pull-right>
<a href="/releases/2017/03/22/gitlab-9-0-released/" title="GitLab 9.0 released with Subgroups and Deploy Boards"><span class=screen-reader-text>Next Post:</span>
<span class=adjacent_post_title>
GitLab 9.0 released with Subgroups and Deploy Boards
</span>
<i class='fa fa-chevron-right'></i>
</a></li>
</ul>
</nav>
</div>
<div class='wrapper signup'>
<div class="panel panel-default nl panel-newsletter-signup">
<div class=row>
<div class="col-12 newsletter">
<div class=newsletter-form style="margin: 32px 0">
<span class=newsletter-preamble>
Sign up for GitLab's monthly newsletter
</span>
<script src="//page.gitlab.com/js/forms2/js/forms2.min.js"></script>
<form id=mktoForm_1077 style="display: initial"></form>
<script>

          MktoForms2.setOptions(
          {
            formXDPath : "/rs/194-VVC-221/images/marketo-xdframe-relative.html"
          });
          MktoForms2.loadForm("//page.gitlab.com", "194-VVC-221", 1077, function(form) {
            form.onSuccess(function(values, followUpUrl) {

              dataLayer.push(
              {
                'event' : 'mktoLead', 
                'mktoFormId' : form.getId(),
                'eventCallback' : function()
                {
                  form.getFormElem().hide();
                  document.getElementById('confirmform').style.display = 'block';
                }, 'eventTimeout' : 3000
              });
              return false;
            });
            function getgacid() {
              try {
                var tracker = ga.getAll()[0];
                return tracker.get('clientId');
              } catch (e) {
                return 'n/a';
              }
            }
            form.vals({
              'gacid': getgacid()
            });
          });
        </script>
<div id=confirmform class=confirm-message style="display:none;"><p>Thanks for subscribing!</p></div>
</div>
</div>
</div>
</div>
</div>
<div class=gitlab-trial>
<div class=gitlab-trial__wrapper>
<div class=gitlab-trial__left-side>
<h2>
Take GitLab for a spin
</h2>
<p>
See what your team could do with The DevSecOps Platform.
</p>
<a href="https://gitlab.com/-/trials/new?glm_content=default-saas-trial&amp;glm_source=about.gitlab.com" class="btn cta-btn" data-ga-name="free trial" data-ga-location="try partial">Get free trial</a>
</div>
<div class=gitlab-trial__right-side>
<img src="/images/cta/gitlab-enterprise-team-member-photos.png" alt=""/>
<p>
Have a question? We're here to help.
</p>
<a class=sales-cta href='https://about.gitlab.com/sales/'>
Talk to an expert
</a>
</div>
</div>
</div>
<div style='display: none'>
<a href="https://gitlab.com/-/ide/project/gitlab-com/www-gitlab-com/edit/master/-/sites/uncategorized/source/releases/posts/2017-03-20-gitlab-8-dot-17-dot-4-security-release.html.md" id=hidden-web-ide>Edit this page</a>
<a href="https://gitlab.com/gitlab-com/www-gitlab-com/blob/master/sites/uncategorized/source/releases/posts/2017-03-20-gitlab-8-dot-17-dot-4-security-release.html.md" id=hidden-page-source>View source</a>
</div>
<footer id=global-footer>
<slp-footer></slp-footer>
</footer>
<script src='/javascripts/be-footer.js?cacheBust=4cf1fb774d1'></script>
<script src="/javascripts/libs/jquery.min.js?cacheBust=4cf1fb774d1"></script>
<script src="/javascripts/libs/jquery-migrate-3.3.0.min.js?cacheBust=4cf1fb774d1"></script>
<script src="/javascripts/libs/bootstrap.min.js?cacheBust=4cf1fb774d1"></script>
<script src="/javascripts/libs/jqBootstrapValidation.js?cacheBust=4cf1fb774d1"></script>
<script src="/javascripts/scripts.js?cacheBust=4cf1fb774d1"></script>
<script>
  //<![CDATA[
    $.ajax({
      url: '//munchkin.marketo.net/munchkin.js',
      dataType: 'script',
      cache: true,
      success: function() {
        Munchkin.init('194-VVC-221');
      }
    });
  //]]>
</script>
<script defer=true src='/javascripts/cbextras.js'></script>
</div>
</body>
</html>
