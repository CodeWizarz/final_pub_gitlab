<!DOCTYPE html>
<html lang=en>
<head>
<meta charset=UTF-8 />
<meta content='width=device-width, initial-scale=1.0' name=viewport />
<meta content='default-src &#39;self&#39; https: http:; script-src &#39;self&#39; &#39;unsafe-inline&#39; &#39;unsafe-eval&#39; https: http:; style-src &#39;self&#39; &#39;unsafe-inline&#39; https: http:; object-src https: http:; base-uri &#39;self&#39;; connect-src &#39;self&#39; https: http: wss: ws:; frame-src &#39;self&#39; https: http:; img-src &#39;self&#39; https: http: data:; manifest-src &#39;self&#39;; media-src &#39;self&#39; https: http:; worker-src &#39;self&#39; https: http:;' http-equiv=Content-Security-Policy />
<meta content='index, follow' name=robots />
<title>
Product Section Direction - Infrastructure cost data
|
GitLab
</title>
<meta content='Part of the Scalability group, Infrastructure cost data is working to provide insights and awareness into the cost of GitLab&#39;s SaaS platforms' name=description />
<meta content='Part of the Scalability group, Infrastructure cost data is working to provide insights and awareness into the cost of GitLab&#39;s SaaS platforms' name='twitter:description'/>
<meta content='Part of the Scalability group, Infrastructure cost data is working to provide insights and awareness into the cost of GitLab&#39;s SaaS platforms' property='og:description'/>
<meta content=GitLab property='og:site_name'/>
<meta content='Product Section Direction - Infrastructure cost data' property='og:title'/>
<meta content='https://gitlab.com/gitlab-com/www-gitlab-com/' property='og:repo'/>
<meta content='https://gitlab.com/' property='og:instance'/>
<meta content='gitlab-com/www-gitlab-com/' property='og:path'/>
<meta content='direction/saas-platforms/cost-data/index.html.md' property='og:relative_path'/>
<meta content='' property='og:monorepo_site_path_fragment'/>
<meta content=article property='og:type'/>
<meta content='https://about.gitlab.com/direction/saas-platforms/cost-data/' property='og:url'/>
<meta content="https://about.gitlab.com/images/opengraph/gitlab-blog-cover.png" property="og:image">
<meta content="https://about.gitlab.com/images/opengraph/gitlab-blog-cover.png" name="twitter:image">
<meta content=summary_large_image name='twitter:card'/>
<meta content='@GitLab' name='twitter:site'/>
<meta content='Product Section Direction - Infrastructure cost data' name='twitter:title'/>
<meta content='@GitLab' name='twitter:creator'/>
<link href='/atom.xml' rel=alternate title=Blog type='application/atom+xml'/>
<link href='/all-releases.xml' rel=alternate title='All Releases' type='application/atom+xml'/>
<link href='/security-releases.xml' rel=alternate title='Security Releases' type='application/atom+xml'/>
<link href='/releases.xml' rel=alternate title='Major Releases' type='application/atom+xml'/>
<link href='/ico/favicon.ico?cache=2022041' rel='shortcut icon'/>
<link href='/ico/favicon-192x192.png?cache=2022041' rel=icon sizes=192x192 type='image/png'/>
<link href='/ico/favicon-160x160.png?cache=2022041' rel=icon sizes=160x160 type='image/png'/>
<link href='/ico/favicon-96x96.png?cache=2022041' rel=icon sizes=96x96 type='image/png'/>
<link href='/ico/favicon-16x16.png?cache=2022041' rel=icon sizes=16x16 type='image/png'/>
<link href='/ico/favicon-32x32.png?cache=2022041' rel=icon sizes=32x32 type='image/png'/>
<link href='/ico/apple-touch-icon-57x57.png?cache=2022041' rel=apple-touch-icon sizes=57x57 />
<link href='/ico/apple-touch-icon-114x114.png?cache=2022041' rel=apple-touch-icon sizes=114x114 />
<link href='/ico/apple-touch-icon-72x72.png?cache=2022041' rel=apple-touch-icon sizes=72x72 />
<link href='/ico/apple-touch-icon-144x144.png?cache=2022041' rel=apple-touch-icon sizes=144x144 />
<link href='/ico/apple-touch-icon-60x60.png?cache=2022041' rel=apple-touch-icon sizes=60x60 />
<link href='/ico/apple-touch-icon-120x120.png?cache=2022041' rel=apple-touch-icon sizes=120x120 />
<link href='/ico/apple-touch-icon-76x76.png?cache=2022041' rel=apple-touch-icon sizes=76x76 />
<link href='/ico/apple-touch-icon-152x152.png?cache=2022041' rel=apple-touch-icon sizes=152x152 />
<link href='/ico/apple-touch-icon-180x180.png?cache=2022041' rel=apple-touch-icon sizes=180x180 />
<meta content='#554488' name=msapplication-TileColor />
<meta content='/ico/mstile-144x144.png?cache=2022041' name=msapplication-TileImage />
<meta content='/ico/browserconfig.xml' name=msapplication-config />
<script src='https://cdn.cookielaw.org/consent/7f944245-c5cd-4eed-a90e-dd955adfdd08/OtAutoBlock.js'></script>
<script charset=UTF-8 data-domain-script=7f944245-c5cd-4eed-a90e-dd955adfdd08 src='https://cdn.cookielaw.org/scripttemplates/otSDKStub.js'></script>
<script>
  //<![CDATA[
    function OptanonWrapper() { }
  //]]>
</script>
<script async=false defer=false id=mermaidscriptsource src='/javascripts/libs/mermaid.min.js?cacheBust=4cf1fb774d1'></script>
<script>
  //<![CDATA[
    window.dataLayer = window.dataLayer || []
    function gtag(){dataLayer.push(arguments);}
    gtag('consent', 'default', {
      'analytics_storage': 'denied',
      'ad_storage': 'denied',
      'functionality_storage': 'denied',
      'region': [ 'AT', 'BE', 'BG', 'HR', 'CY', 'CZ', 'DK', 'EE', 'FI', 'FR', 'DE', 'GR', 'HU', 'IE', 'IT', 'LV', 'LT', 'LU', 'MT', 'NL', 'PL', 'PT', 'RO', 'SK', 'SI', 'ES', 'SE', 'IS', 'LI', 'NO', 'GB', 'PE', 'RU'],
      'wait_for_update': 500
    });
    gtag('consent', 'default', {
      'analytics_storage': 'granted',
      'ad_storage': 'granted',
      'functionality_storage': 'granted',
      'wait_for_update': 500
    });
    
    window.geofeed = (options) => {
      dataLayer.push({
        'event' : 'OneTrustCountryLoad',
        'oneTrustCountryId': options.country.toString()
      })
    }
    
    const json = document.createElement('script');
    json.setAttribute('src', 'https://geolocation.onetrust.com/cookieconsentpub/v1/geo/location/geofeed');
    document.head.appendChild(json);
  //]]>
</script>
<script>document.documentElement.className = 'html--js'</script>
<script async='' src='//cdn.bizible.com/scripts/bizible.js'></script>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-37019925-1', 'auto', {allowLinker: true});
ga('require', 'GTM-WC3ZR2P');
</script>
<script>
(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NJXWQL');
</script>
<script>
(function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
(w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
})(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
_st('install','Z4n7msKyctXXfJs66EKx','2.0.0');
</script>
<link href='https://about.gitlab.com/direction/saas-platforms/cost-data/' rel=canonical />
<link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,500,600,700' rel=stylesheet />
<link crossorigin=anonymous href='https://use.fontawesome.com/releases/v5.1.0/css/all.css' integrity='sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt' rel=stylesheet />
<link href='https://cdnjs.cloudflare.com/ajax/libs/tiny-slider/2.8.7/tiny-slider.css' rel=stylesheet />
<link href="/stylesheets/styles.css" rel=stylesheet /><link href="/stylesheets/highlight.css" rel=stylesheet />

<link href="/stylesheets/slippers.css?cacheBust=4cf1fb774d1" rel=stylesheet />
<link href="/stylesheets/be-navigation.css?cacheBust=4cf1fb774d1" rel=stylesheet />
<link href="/stylesheets/handbook.css" rel=stylesheet />
<link href="/stylesheets/navigation-helpers.css" rel=stylesheet />
</head>
<body data-spy=scroll data-target='.qnav'>
<noscript>
<iframe height=0 src='//www.googletagmanager.com/ns.html?id=GTM-NJXWQL' style='display:none;visibility:hidden' width=0></iframe>
</noscript>
<template id=be-nav>
<div id=be-nav-target>
<slp-navigation></slp-navigation>
</div>
</template>
<nav class='slp-sticky slp-left-0 slp-right-0 slp-top-0 slp-bg-white slp-z-90' id=global-nav style='z-index: 1000000;'>
<be-navigation></be-navigation>
</nav>
<div class='search-box js-search-box'>
<i class='fa fa-search search-box-icon'></i>
<input class='search-input js-search st-header' placeholder='Search...'/>
<button aria-label='Close search' class='search-close js-search-toggle' type=button>
<i class='fa fa-times'></i>
</button>
</div>
<script src='/javascripts/be-navigation.js?cacheBust=4cf1fb774d1'></script>
<div class=blank-header>
<img src="/images/home/icons-pattern-left.svg" class="image-border image-border-left" alt="Gitlab hero border pattern left svg"/>
<img src="/images/home/icons-pattern-right.svg" class="image-border image-border-right" alt="Gitlab hero border pattern right svg"/>
<div class=header-content>
<h1>
Product Section Direction - Infrastructure cost data
</h1>
</div>
</div>
<div class='wrapper sidebar-layout-wrapper clearfix'>
<aside class=tocs-sidebar>
<div class=codeowners>
<div>
<h4 class=codeowners-header>
Maintained by<span class='hidden-md hidden-lg'>:</span></h4>
</div>
<div class=codeowners-list>
<a class=codeowner href='https://gitlab.com/fzimmer'>
<img
src='/images/team/fabianzimmer.jpg'
class=codeowner-avatar-img
alt='Fabian Zimmer'
title='Fabian Zimmer'
>
</a>
<a class=codeowner href='https://gitlab.com/david'>
<img
src='/images/team/ddesanto.jpg'
class=codeowner-avatar-img
alt='David DeSanto'
title='David DeSanto'
>
</a>
<a class=codeowner href='https://gitlab.com/gl-product-leadership'>
<div class=codeowner-avatar-group title='@gl-product-leadership'>
<span>G</span>
</div>
</a>
</div>
</div>
<h5>
Contribute to this page
</h5>
<div>
<a href="https://gitlab.com/-/ide/project/gitlab-com/www-gitlab-com/edit/master/-/source/direction/saas-platforms/cost-data/index.html.md" class=external-source-link>Edit this page</a>
<div class='d-flex align-items-center mt-2'></div>
</div>
</aside>
<div class='container md-page'>
<ol class=breadcrumb>
<li>You are here:</li>
<li><a href="/direction/">GitLab Direction</a></li><li><a href="/direction/saas-platforms/">Product Section Direction - SaaS Platforms</a></li><li>Product Section Direction - Infrastructure cost data</li>
</ol>
<div class=legal-disclaimer>
<p id=legal-disclaimer>
The following page may contain information related to upcoming products, features and functionality. It is important to note that the information presented is for informational purposes only, so please do not rely on the information for purchasing or planning purposes. Just like with all projects, the items mentioned on the page are subject to change or delay, and the development, release, and timing of any products, features or functionality remain at the sole discretion of GitLab Inc.
</p>
</div>
<ul id=markdown-toc>
<li><a href="#mission" id=markdown-toc-mission>Mission</a></li>
<li><a href="#overview" id=markdown-toc-overview>Overview</a> <ul>
<li><a href="#target-personas" id=markdown-toc-target-personas>Target personas</a></li>
<li><a href="#association-of-spend-to-tiers-and-categories" id=markdown-toc-association-of-spend-to-tiers-and-categories>Association of spend to tiers and categories</a></li>
</ul>
</li>
<li><a href="#whats-next-and-why" id=markdown-toc-whats-next-and-why>What's next and why</a> <ul>
<li><a href="#cost-instrumentation-and-data-engineering" id=markdown-toc-cost-instrumentation-and-data-engineering>Cost instrumentation and data engineering</a></li>
<li><a href="#creation-of-cost-dashboards" id=markdown-toc-creation-of-cost-dashboards>Creation of cost dashboards</a></li>
</ul>
</li>
<li><a href="#vision" id=markdown-toc-vision>Vision</a></li>
</ul>
<p>Last reviewed: 2023-01-03</p>
<h2 id=mission>Mission</h2>
<p>Provide actionable insights to <a href="#personas">multiple stakeholders</a> and broaden awareness of the cloud cost of GitLab's SaaS platforms, driving operational efficiencies and reliable cost projections.</p>
<h2 id=overview>Overview</h2>
<p>Adoption of GitLab's <a href="https://ir.gitlab.com/node/8016/html#ic28432d692fc49cba2df39695b0d1973_37">SaaS services is growing</a>, and with it, the cost to provide those services.</p>
<p>As a result, it is becoming more important that GitLab is able to:</p>
<ul>
<li>Timely observe cloud spend patterns to identify anomalies, and quickly understand their root causes</li>
<li>Identify opportunities for improved efficiencies and effectively prioritize them</li>
<li>Accurately project future cloud spend</li>
</ul>
<p>We will accomplish this by:</p>
<ul>
<li>Completing instrumentation of cost telemetry and usage data</li>
<li>Associating cloud spend to specific <a href="/handbook/product/categories/">categories</a> (Gitaly, Container Registry)</li>
<li>Associating cloud spend to specific <a href="/pricing/">product tiers</a> (Premium, Ultimate, etc.)</li>
<li>Creating a cost dashboard which allows filtering by product tier and product category</li>
<li>Setting cost targets by product group, similar to error budgets</li>
</ul>
<h3 id=target-personas>Target personas</h3>
<p>There are four primary personas whom we are trying to serve:</p>
<ul>
<li>Product groups: Easily understand the cloud costs of their existing and future features / categories, and alerts on any significant changes</li>
<li>Finance: Providing accurate projections of cloud spend and allocation of spend to different product tiers / budgets (COGS, Marketing, R&amp;D, etc.)</li>
<li>Product Leadership: Cost efficiency / margin</li>
<li>Infrastructure Leadership: Top-level cost efficiency and trends</li>
</ul>
<h3 id=association-of-spend-to-tiers-and-categories>Association of spend to tiers and categories</h3>
<p>In order to support our goals of splitting cloud spend by tier and category, we need to combine data from multiple sources. This is because no single location has all of the information we need:</p>
<p>Our cloud infrastructure is shared across product tiers, and in some cases product categories. For example our rails nodes serve as the compute for a wide range of features, along with our database nodes. Even when we have infrastructure specific to a feature, for example our gitaly or registry nodes, they are shared across all product tiers. This means the billing data from our cloud providers cannot by itself provide the insights we need.</p>
<p>To solve this, we have been instrumenting the product to be able to output product usage information at a granular level. We are now able to report on <a href="https://docs.gitlab.com/ee/user/usage_quotas.html">storage usage by project and namespace</a>, and we are working towards <a href="https://gitlab.com/groups/gitlab-org/-/epics/7421">transfer usage (internal only)</a> as well. We can then take the storage or transfer usage for a particular category, and aggregate it to determine the breakdown of storage/transfer by product tier. From here, we can then apply these ratios to the overall cloud costs for this particular service, to determine the tier breakdown. CI is very similar, where the cloud runner costs are shared, but with the compute minutes usage data from the product, we can allocate the costs to the correct tier.</p>
<p>In some cases when we lack product usage data, we can supplement with other data, for example the logging information from our registry service can provide download statistics. In addition for shared services like the database or our rails nodes, we can utilize other usage data as a proxy to allocate these costs by tier.</p>
<h2 id=whats-next-and-why>What's next and why</h2>
<h3 id=cost-instrumentation-and-data-engineering>Cost instrumentation and data engineering</h3>
<p>In order to provide detailed cost information beyond what is provided in cloud provider reporting, we need to leverage instrumentation of our own. To achieve this we are primarily working to report more detailed usage information in the product, and then ship that data over to the data warehouse.</p>
<p>We are working to allocate costs in primarily two ways:</p>
<ul>
<li>By GitLab product category - to provide insights into root cause of changes and drive efficiencies at product group level</li>
<li>
<p>By Product Tier - to accurately allocate costs across Free, Paid, or Internal Use, in support of Financial Statement classifications. (i.e. allocate to Marketing, COGS, or R&amp;D)</p>
</li>
<li><a href="https://gitlab.com/groups/gitlab-data/-/epics/440">Instrument and load GitLab SaaS cost data into Snowflake</a></li>
<li><a href="https://gitlab.com/gitlab-com/gl-infra/scalability/-/issues/1925">Feature category summary for infrastructure cost data</a></li>
</ul>
<h3 id=creation-of-cost-dashboards>Creation of cost dashboards</h3>
<p>While we work on refining the input data, we can continue to improve the cost dashboards we provide to our personas. We have an initial dashboard available today in <a href="https://app.periscopedata.com/app/gitlab/1088870/Allocating-Differences-(Networking)-Sheet---WIP">SiSense</a>.</p>
<p>We are working to improve this dashboard in a few key ways:</p>
<ul>
<li>Validating the allocation logic and updating it to include new <a href="#cost-instrumentation-and-data-engineering">instrumentation</a> as it arrives, like improved labeling of cloud resources.</li>
<li>Splitting the cost in two ways, by:
<ul>
<li>Product tier (Free, Paid, Internal)</li>
<li>Product Category</li>
</ul>
</li>
</ul>
<p>This work is being tracked here: https://gitlab.com/groups/gitlab-com/-/epics/1683</p>
<h2 id=vision>Vision</h2>
<p>Long term, we'd like to have a few key results:</p>
<ul>
<li>Accurate and easy forecasts of cloud spend for GitLab SaaS</li>
<li>Per-category cost data available to product groups, along with real time alerts on significant changes</li>
<li>Fully automated SSOT of cost data, with data pipeline and dashboard allocation logic transparent and version controlled</li>
<li>Framework which product groups can utilize to easily comply with labeling and instrumentation requirements</li>
<li>All of this work to be built within GitLab, as many companies operate SaaS services and need to understand this information</li>
</ul>
</div>
</div>
<div style='display: none'>
<a href="https://gitlab.com/-/ide/project/gitlab-com/www-gitlab-com/edit/master/-/source/direction/saas-platforms/cost-data/index.html.md" id=hidden-web-ide>Edit this page</a>
<a href="https://gitlab.com/gitlab-com/www-gitlab-com/blob/master/source/direction/saas-platforms/cost-data/index.html.md" id=hidden-page-source>View source</a>
</div>
<footer id=global-footer>
<slp-footer></slp-footer>
</footer>
<script src='/javascripts/be-footer.js?cacheBust=4cf1fb774d1'></script>
<script src="/javascripts/libs/jquery.min.js?cacheBust=4cf1fb774d1"></script>
<script src="/javascripts/libs/jquery-migrate-3.3.0.min.js?cacheBust=4cf1fb774d1"></script>
<script src="/javascripts/libs/bootstrap.min.js?cacheBust=4cf1fb774d1"></script>
<script src="/javascripts/libs/jqBootstrapValidation.js?cacheBust=4cf1fb774d1"></script>
<script src="/javascripts/scripts.js?cacheBust=4cf1fb774d1"></script>
<script>
  //<![CDATA[
    $.ajax({
      url: '//munchkin.marketo.net/munchkin.js',
      dataType: 'script',
      cache: true,
      success: function() {
        Munchkin.init('194-VVC-221');
      }
    });
  //]]>
</script>
<script defer=true src='/javascripts/cbextras.js'></script>
<script src="/javascripts/generate-navigation-helpers.js"></script>
</body>
</html>
